# üîç Fallback –º–µ—Ç–æ–¥ - —Å–∞–º–æ–ø–∏—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ß—Ç–æ —ç—Ç–æ?

Fallback –º–µ—Ç–æ–¥ - —ç—Ç–æ **—Å–∞–º–æ–ø–∏—Å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ** –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö API. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ Hugging Face API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è CORS).

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### 1. –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏

```javascript
const aspectRatio = img.width / img.height;
if (aspectRatio > 1.5) {
    keywords.push('–ø–µ–π–∑–∞–∂', '–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ');
} else if (aspectRatio < 0.7) {
    keywords.push('–ø–æ—Ä—Ç—Ä–µ—Ç', '–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ');
}
```

**–ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:**
- –ü–µ–π–∑–∞–∂ (—à–∏—Ä–æ–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- –ü–æ—Ä—Ç—Ä–µ—Ç (–≤—ã—Å–æ–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- –ö–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### 2. –ê–Ω–∞–ª–∏–∑ —è—Ä–∫–æ—Å—Ç–∏ –∏ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞

```javascript
// –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω—é—é —è—Ä–∫–æ—Å—Ç—å –≤—Å–µ—Ö –ø–∏–∫—Å–µ–ª–µ–π
const avgBrightness = totalBrightness / pixelCount;

if (avgBrightness < 40) {
    keywords.push('—Ç–µ–º–Ω–æ–µ', '–Ω–æ—á—å');
} else if (avgBrightness < 80) {
    keywords.push('—Å—É–º–µ—Ä–∫–∏', '–≤–µ—á–µ—Ä', '—Ä–∞—Å—Å–≤–µ—Ç');
} else if (avgBrightness < 150) {
    keywords.push('–¥–Ω–µ–≤–Ω–æ–µ', '—Å–≤–µ—Ç–ª–æ–µ');
}
```

**–ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:**
- –í—Ä–µ–º—è —Å—É—Ç–æ–∫ (–Ω–æ—á—å, —Å—É–º–µ—Ä–∫–∏, –¥–µ–Ω—å, —è—Ä–∫–æ–µ —Å–æ–ª–Ω—Ü–µ)
- –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å (–º—è–≥–∫–æ–µ/–∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

### 3. –ê–Ω–∞–ª–∏–∑ —Ü–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ Canvas API

```javascript
// –†–∏—Å—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ canvas
const canvas = document.createElement('canvas');
const ctx = canvas.getContext('2d');
ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

// –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –ø–∏–∫—Å–µ–ª–µ–π
const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
const data = imageData.data; // –ú–∞—Å—Å–∏–≤ [R, G, B, A, R, G, B, A, ...]
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. –°–æ–∑–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π canvas —ç–ª–µ–º–µ–Ω—Ç
2. –†–∏—Å—É–µ—Ç –Ω–∞ –Ω–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—É–º–µ–Ω—å—à–µ–Ω–Ω–æ–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
3. –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –ø–∏–∫—Å–µ–ª–µ–π (RGB –∑–Ω–∞—á–µ–Ω–∏—è)
4. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å

### 4. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ HSV

```javascript
// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º RGB –≤ HSV (Hue, Saturation, Value)
const h = ... // –û—Ç—Ç–µ–Ω–æ–∫ (0-360 –≥—Ä–∞–¥—É—Å–æ–≤)
const s = ... // –ù–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å (0-1)
const v = ... // –Ø—Ä–∫–æ—Å—Ç—å (0-1)

// –ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ–º —Ü–≤–µ—Ç –ø–æ –æ—Ç—Ç–µ–Ω–∫—É
if (hue < 15 || hue >= 345) colorBuckets['–∫—Ä–∞—Å–Ω—ã–π']++;
else if (hue < 45) colorBuckets['–æ—Ä–∞–Ω–∂–µ–≤—ã–π']++;
else if (hue < 75) colorBuckets['–∂–µ–ª—Ç—ã–π']++;
// ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ
```

**–ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:**
- –ü—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–µ —Ü–≤–µ—Ç–∞: –∫—Ä–∞—Å–Ω—ã–π, –æ—Ä–∞–Ω–∂–µ–≤—ã–π, –∂–µ–ª—Ç—ã–π, –∑–µ–ª–µ–Ω—ã–π, –≥–æ–ª—É–±–æ–π, —Å–∏–Ω–∏–π, —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π, —Ä–æ–∑–æ–≤—ã–π
- –ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞: –±–µ–ª—ã–π, —Å–µ—Ä—ã–π, —á–µ—Ä–Ω—ã–π, –∫–æ—Ä–∏—á–Ω–µ–≤—ã–π, –±–µ–∂–µ–≤—ã–π

### 5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

```javascript
// –ï—Å–ª–∏ –º–Ω–æ–≥–æ –∑–µ–ª–µ–Ω–æ–≥–æ/–∂–µ–ª—Ç–æ–≥–æ - –ø—Ä–∏—Ä–æ–¥–∞
if (greenYellow > pixelCount * 0.3) {
    keywords.push('–ø—Ä–∏—Ä–æ–¥–∞', '—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å');
}

// –ï—Å–ª–∏ –º–Ω–æ–≥–æ –∫–æ—Ä–∏—á–Ω–µ–≤–æ–≥–æ - –æ—Å–µ–Ω—å
if (brown > pixelCount * 0.2) {
    keywords.push('–æ—Å–µ–Ω—å', '–∑–µ–º–ª—è');
}
```

**–ß—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:**
- –ü—Ä–∏—Ä–æ–¥–∞/—Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø–æ –ø—Ä–µ–æ–±–ª–∞–¥–∞–Ω–∏—é –∑–µ–ª–µ–Ω–æ–≥–æ)
- –°–µ–∑–æ–Ω (–æ—Å–µ–Ω—å –ø–æ –∫–æ—Ä–∏—á–Ω–µ–≤–æ–º—É)
- –î—Ä—É–≥–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω** - –Ω–µ –Ω—É–∂–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç  
‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–µ—Ç –ª–∏–º–∏—Ç–æ–≤ API  
‚úÖ **–ë—ã—Å—Ç—Ä–æ** - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ  
‚úÖ **–ü—Ä–∏–≤–∞—Ç–Ω–æ** - –¥–∞–Ω–Ω—ã–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ã  
‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞** - –¥–∞–∂–µ –∫–æ–≥–¥–∞ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã  

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

‚ùå **–ù–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã** - –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –Ω–∞ —Ñ–æ—Ç–æ (–≤–µ–ª–æ—Å–∏–ø–µ–¥, —á–µ–ª–æ–≤–µ–∫, –∑–¥–∞–Ω–∏–µ)  
‚ùå **–¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏** - —Ü–≤–µ—Ç–∞, —è—Ä–∫–æ—Å—Ç—å, –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è  
‚ùå **–ú–µ–Ω—å—à–µ —Ç–æ—á–Ω–æ—Å—Ç—å** - —á–µ–º —É AI API (Google Vision, Hugging Face)  

## –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ó–∏–º–Ω—è—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å –¥–µ—Ç—å–º–∏:
- `–≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ` (–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è)
- `–¥–Ω–µ–≤–Ω–æ–µ` (—è—Ä–∫–æ—Å—Ç—å)
- `–±–µ–ª—ã–π` (–ø—Ä–µ–æ–±–ª–∞–¥–∞—é—â–∏–π —Ü–≤–µ—Ç)
- `—Å–µ—Ä—ã–π` (–≤—Ç–æ—Ä–æ–π –ø–æ —á–∞—Å—Ç–æ—Ç–µ —Ü–≤–µ—Ç)

### –õ–µ—Ç–Ω–∏–π –ø–µ–π–∑–∞–∂:
- `–ø–µ–π–∑–∞–∂` (–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è)
- `—è—Ä–∫–æ–µ` (—è—Ä–∫–æ—Å—Ç—å)
- `–∑–µ–ª–µ–Ω—ã–π` (—Ü–≤–µ—Ç)
- `–ø—Ä–∏—Ä–æ–¥–∞` (–∫–æ–Ω—Ç–µ–∫—Å—Ç)

### –ù–æ—á–Ω–∞—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è:
- `—Ç–µ–º–Ω–æ–µ` (—è—Ä–∫–æ—Å—Ç—å)
- `–Ω–æ—á—å` (–≤—Ä–µ–º—è —Å—É—Ç–æ–∫)
- `—á–µ—Ä–Ω—ã–π` (—Ü–≤–µ—Ç)

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

1. **–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ª–æ–∫–∞–ª—å–Ω–æ** - –∫–æ–≥–¥–∞ Hugging Face API –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è CORS
2. **–ö–∞–∫ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç** - –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫—É
3. **–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞** - –∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–∞ –≤—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å

## –ö–æ–¥ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:

`autoKeywords.js` ‚Üí —Ñ—É–Ω–∫—Ü–∏—è `extractBasicKeywordsFromImage()`

---

**–ò—Ç–æ–≥–æ:** –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (Canvas API) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

